@using MudBlazor
@inherits BlazorBusyComponentBaseModel
<div class="input-group mb-3">
    <input disabled="@IsBusyProgress" type="date" class="form-control" id="inputDate" @bind="createdDate">
    <select disabled="@IsBusyProgress" class="form-select" aria-label="Default select example" @bind=newStatus>
        <option selected="@(newStatus is null)" value="@((DeliveryStatusesEnum?)null)"></option>
        @foreach (DeliveryStatusesEnum _st in Enum.GetValues<DeliveryStatusesEnum>())
        {
            <option value="@_st">@_st.DescriptionInfo()</option>
        }
    </select>
    <input disabled="@IsBusyProgress" type="text" class="form-control" id="inputName" placeholder="Примечание" @bind=createdName>
    <button @onclick="AddNewStatus"
            type="button"
            class="btn btn-primary"
            disabled="@(newStatus is null || createdDate is null || IsBusyProgress)">
        Новый статус
    </button>
</div>

<MudTable ServerData="ServerReload" Dense Hover @ref=tableRef>
    <ToolBarContent>
        <MudText Typo="Typo.h6">Статусы доставки (розница)</MudText>
        <MudSpacer />
    </ToolBarContent>
    <HeaderContent>
        <MudTh>Дата</MudTh>
        <MudTh>Статус</MudTh>
        <MudTh>Примечание</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Дата">@context.DateOperation</MudTd>
        <MudTd DataLabel="Статус">@context.DeliveryStatus.DescriptionInfo()</MudTd>
        <MudTd DataLabel="Примечание">@context.Name</MudTd>
    </RowTemplate>
    <NoRecordsContent>
        <MudText>No matching records found</MudText>
    </NoRecordsContent>
    <LoadingContent>
        <MudText>Loading...</MudText>
    </LoadingContent>
    <PagerContent>
        <MudTablePager />
    </PagerContent>
</MudTable>

