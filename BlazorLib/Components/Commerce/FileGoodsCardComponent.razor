@using MudBlazor
@inherits BlazorBusyComponentBaseAuthModel

<MudCard>
    <MudCardMedia Image="@_fileName" />
    <MudCardContent>
        <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Переопределить имя</label>
            <input @bind-value="fileObjectEdit.Name"
                   @bind-value:event="oninput"
                   type="text"
                   disabled="@IsBusyProgress"
                   placeholder="@FileObject.FileName"
                   class="form-control"
                   id="exampleInputEmail1"
                   aria-describedby="emailHelp">
            <div id="emailHelp" class="form-text">Для отображения в карточке</div>
        </div>
        <div class="mb-3">
            <label for="exampleInputEmail2" class="form-label">Короткое описание (опционально)</label>
            <input @bind-value="fileObjectEdit.ShortDescription"
                   @bind-value:event="oninput"
                   type="text"
                   disabled="@IsBusyProgress"
                   class="form-control"
                   id="exampleInputEmail2"
                   aria-describedby="emailHelp2">
            <div id="emailHelp2" class="form-text">Примечание к файлу (если требуется).</div>
        </div>
        @* <div class="mb-3">
            <label for="exampleFormControlTextarea1" class="form-label">Полное описание</label>
            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" @oninput="HandleOnChange">@fileObjectEdit.FullDescription</textarea>
        </div> *@
        <div class="mb-3 form-check" title="Добавить файл в публичную галерею объекта">
            <input @bind="fileObjectEdit.IsGallery" type="checkbox" class="form-check-input" id="exampleCheck1">
            <label class="form-check-label" for="exampleCheck1">Галерея</label>
        </div>
        @if (IsBusyProgress)
        {
            <MudProgressLinear Color="Color.Primary" Indeterminate Class="my-7" />
        }
    </MudCardContent>
    <MudCardActions>
        <MudButton Variant="Variant.Text"
                   Color="Color.Primary"
                   Disabled="@(IsBusyProgress || backDisabled.Contains(MoveStatus))"
                   OnClick="async () => await MoveFileAsync(DirectionsEnum.Up)"
                   StartIcon="@Icons.Material.Filled.ArrowBackIos"></MudButton>
        <MudButton Variant="Variant.Text"
                   Disabled="@(IsBusyProgress || nextDisabled.Contains(MoveStatus))"
                   Color="Color.Primary"
                   OnClick="async () => await MoveFileAsync(DirectionsEnum.Down)"
                   EndIcon="@Icons.Material.Filled.ArrowForwardIos"></MudButton>
        <MudButton Variant="Variant.Text"
                   Color="Color.Info"
                   EndIcon="@Icons.Material.Filled.Save"
                   OnClick="SaveConfig"
                   Disabled="@(IsBusyProgress || !IsEdited)"></MudButton>
        @if (IsEdited)
        {
            <MudButton Variant="Variant.Text"
                       Color="Color.Success"
                       Disabled="IsBusyProgress"
                       EndIcon="@Icons.Material.Filled.Cancel"
                       OnClick="() => fileObjectEdit = GlobalTools.CreateDeepCopy(FileObjectConfig)!"></MudButton>
        }
    </MudCardActions>
</MudCard>